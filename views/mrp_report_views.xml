<odoo>
    <!-- Menú para Reportes MRP -->
    <menuitem id="menu_mrp_reports_extension" 
              name="Reportes MRP" 
              parent="mrp.menu_mrp_root" 
              sequence="10" />

    <!-- Acción para Vista Previa -->
    <record id="action_mrp_report_preview" model="ir.actions.act_window">
        <field name="name">Vista Previa: Eficiencia</field>
        <field name="res_model">mrp.production</field>
        <field name="view_mode">tree</field>
        <field name="domain">[]</field>
        <field name="help" type="html">
            <p>
                Seleccione las órdenes de fabricación para generar el reporte de eficiencia.
            </p>
        </field>
    </record>

    <!-- Vista Lista para Selección -->
    <record id="view_mrp_report_list" model="ir.ui.view">
        <field name="name">mrp.report.list</field>
        <field name="model">mrp.production</field>
        <field name="arch" type="xml">
            <tree string="Vista Previa: Reporte de Eficiencia">
                <field name="name" string="Orden de Producción"/>
                <field name="product_id" string="Producto"/>
                <field name="efficiency_percentage" string="Eficiencia (%)"/>
                <field name="state" string="Estado"/>
                <field name="date_start" string="Fecha de Inicio"/> 
            </tree>
        </field>
    </record>

    <!-- Botón en Vista de Lista -->
    <record id="view_mrp_production_tree_inherit" model="ir.ui.view">
        <field name="name">mrp.production.tree.inherit</field>
        <field name="model">mrp.production</field>
        <field name="inherit_id" ref="mrp.view_mrp_production_tree"/>
        <field name="arch" type="xml">
            <tree>
                <button name="%(action_mrp_report_pdf)d" string="Generar PDF" type="action" class="btn-primary"/>
            </tree>
        </field>
    </record>

    <!-- Botón en Vista de Formulario -->
    <record id="view_mrp_production_form_inherit" model="ir.ui.view">
        <field name="name">mrp.production.form.inherit</field>
        <field name="model">mrp.production</field>
        <field name="inherit_id" ref="mrp.view_mrp_production_form"/>
        <field name="arch" type="xml">
            <header>
                <button name="%(action_mrp_report_pdf)d" string="Generar Reporte PDF" type="action" class="btn-primary"/>
            </header>
        </field>
    </record>

    <!-- Acción para Generar Reporte PDF -->
    <record id="action_mrp_report_pdf" model="ir.actions.report">
        <field name="name">Reporte Consolidado de Eficiencia</field>
        <field name="model">mrp.production</field>
        <field name="report_name">mrp_reports_extension.report_product_efficiency</field>
        <field name="report_type">qweb-pdf</field>
        <field name="print_report_name">'Reporte_Eficiencia_%s' % (object.name)</field>
    </record>
</odoo>